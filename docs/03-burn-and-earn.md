# Механизм "Burn and Earn"

Механизм "Burn and Earn" - ключевой компонент для обеспечения постоянного роста ликвидности пула SOL-VC и распределения VG токенов в экосистеме TECH HY.

## Процесс конвертации
1. **Подготовка активов**:
   - Пользователь должен иметь X токенов VC и Y SOL в соответствующей пропорции
   - Пропорция определяется текущим курсом в пуле ликвидности Raydium

2. **Формирование LP токена**:
   - Пользователь добавляет оба актива (VC и SOL) в пул Raydium
   - В результате получает Z LP токенов, представляющих долю в пуле
   - Количество LP токенов зависит от размера вклада и текущей ликвидности

3. **Блокировка LP токенов**:
   - LP токены переводятся в PermanentLockVault (PDA)
   - Блокировка необратима и постоянна
   - 50% привлеченных средств от пресейла также блокируются в LP SOL-VC

4. **Эмиссия VG токенов**:
   - Пользователь получает VG токены по формуле ниже

5. **Создание NFT Fee Key**:
   - Выпуск NFT с правом на доход от комиссий

## Формула расчета VG токенов
```
VG = LP * C * (1 + B * log10(LP/LP_min))
```
Где:
- `LP` - количество заблокированных LP токенов
- `C` - базовый коэффициент (10)
- `B` - бонусный коэффициент (0.2)
- `LP_min` - минимальное количество LP (1)

## PermanentLockVault
- Создается как PDA с известными seed-значениями
- Отсутствует возможность подписи транзакций на вывод
- Для каждого пользователя сохраняется UserLockInfo с данными о блокировке

## NFT Fee Key
| Уровень | Количество LP | Множитель |
|---------|---------------|-----------|
| Common  | < 1,000       | 1.0x      |
| Rare    | 1,000-10,000  | 1.2x      |
| Epic    | 10,000-100,000| 1.5x      |
| Legendary| > 100,000     | 2.0x      |

Доля в комиссиях: `share_percentage = (user_locked_lp * tier_multiplier) / total_weighted_locked_lp * 100%`

## Raydium Integration
- Использование Raydium SDK для создания ликвидности
- Параметр `slippage_tolerance` для защиты от проскальзывания цены
- Атомарная транзакция для всех операций
- Интеграция с токенами VC и SOL для создания пула ликвидности

## Обработка ошибок
1. **Недостаточный баланс**: Проверка наличия достаточного количества VC и SOL
2. **Проскальзывание цены**: Проверка параметра `slippage_tolerance`, отмена при превышении
3. **Ограничение размера**: Лимиты на максимальный размер транзакции 