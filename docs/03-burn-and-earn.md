# Механизм "Burn and Earn"

Механизм "Burn and Earn" - ключевой компонент для обеспечения постоянного роста ликвидности пула SOL-VC и распределения VG токенов в экосистеме TECH HY.

## Процесс конвертации
1. **Разделение VC токенов**:
   - Пользователь отправляет X токенов VC 
   - Контракт разделяет X на две части: X/2 и X/2

2. **Обмен на SOL**:
   - Первая часть (X/2) обменивается на SOL через Raydium AMM
   - Обмен происходит по текущему рыночному курсу

3. **Формирование LP токена**:
   - X/2 VC токенов и полученные SOL добавляются в пул Raydium
   - Получение Z LP токенов

4. **Блокировка LP токенов**:
   - LP токены переводятся в PermanentLockVault (PDA)
   - Блокировка необратима и постоянна
   - 50% привлеченных средств от пресейла также блокируются в LP SOL-VC

5. **Эмиссия VG токенов**:
   - Пользователь получает VG токены по формуле ниже

6. **Создание NFT Fee Key**:
   - Выпуск NFT с правом на доход от комиссий

## Формула расчета VG токенов
```
VG = LP * C * (1 + B * log10(LP/LP_min))
```
Где:
- `LP` - количество заблокированных LP токенов
- `C` - базовый коэффициент (10)
- `B` - бонусный коэффициент (0.2)
- `LP_min` - минимальное количество LP (1)

## PermanentLockVault
- Создается как PDA с известными seed-значениями
- Отсутствует возможность подписи транзакций на вывод
- Для каждого пользователя сохраняется UserLockInfo с данными о блокировке

## NFT Fee Key
| Уровень | Количество LP | Множитель |
|---------|---------------|-----------|
| Common  | < 1,000       | 1.0x      |
| Rare    | 1,000-10,000  | 1.2x      |
| Epic    | 10,000-100,000| 1.5x      |
| Legendary| > 100,000     | 2.0x      |

Доля в комиссиях: `share_percentage = (user_locked_lp * tier_multiplier) / total_weighted_locked_lp * 100%`

## Raydium Integration
- Использование Raydium SDK для обмена токенов и создания ликвидности
- Параметр `minimum_amount_out` для защиты от проскальзывания цены
- Атомарная транзакция для всех операций

## Обработка ошибок
1. **Недостаточная ликвидность**: Отмена транзакции
2. **Проскальзывание цены**: Проверка `minimum_amount_out`, отмена при превышении
3. **Ограничение размера**: Лимиты на максимальный размер транзакции 